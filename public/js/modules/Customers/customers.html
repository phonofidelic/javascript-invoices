<h2 ng-init="vm.getCustomers()">Customers</h2>

<button type="button" 
		name="add-new-customer"
	    class="btn btn-default btn-block add-new-item-btn"
	    ng-click="newCustomerForm = !newCustomerForm"
	    ng-class="{active: newCustomerForm}">Add a new customer
</button>

<form class="new-item-form well" ng-show="newCustomerForm">
	<div class="form-group">
		<label for="new-customer-name">Customer name:
			<input type="text" 
				   name="new-customer-name"
				   id="new-customer-name"
				   class="form-control pull-right"
				   ng-model="vm.newCustomer.name" />
		</label>
	</div>

	<div class="form-group">
		<label for="new-customer-address">Address:
			<input type="text" 
				   name="new-customer-address"
				   id="new-customer-address"
				   class="form-control pull-right"
				   ng-model="vm.newCustomer.address" />
		</label>
	</div>

	<div class="form-group">
		<label for="new-customer-phone">Phone number:
			<input type="text" 
				   name="new-customer-phone"
				   id="new-customer-phone"
				   class="form-control pull-right"
				   ng-model="vm.newCustomer.phone" />
		</label>
	</div>



	<button type="submit" 
		   name="save-new-customer"
		   class="btn btn-default btn-block new-item-submit-btn"
		   ng-click="vm.addCustomer()">save
	</button>
</form>

<table class="table">
	<tr class="table-header">
		<th><b>id</b></th>
		<th><b>name</b></th>
		<th><b>address</b></th>
		<th><b>phone number</b></th>
	</tr>
	<tr ng-repeat="customer in vm.customers track by $index">
		<td>{{customer.id}}</td>
		<td>
			<span ng-show="!customer.editing">{{customer.name}}</span>
			<span ng-show="customer.editing">
				<label for="customer-name">
					<input type="text" 
						   name="customer-name"
						   id="customer-name"
						   value="{{customer.name}}"
						   ng-model="customer.name">
				</label>
			</span>
		</td>
		<td>
			<span ng-show="!customer.editing">{{customer.address}}</span>
			<span ng-show="customer.editing">
				<label for="customer-address">
					<input type="text" 
						   name="customer-address"
						   id="customer-address"
						   value="{{customer.address}}"
						   ng-model="customer.address">
				</label>
			</span>
		</td>
		<td>
			<span ng-show="!customer.editing">{{customer.phone}}</span>
			<span ng-show="customer.editing">
				<label for="customer-phone">
					<input type="text" 
						   name="customer-phone"
						   id="customer-phone"
						   value="{{customer.phone}}"
						   ng-model="customer.phone">
				</label>
			</span>
		</td>
		<td>
			<span class="delete-item" ng-show="customer.editing">
				<button type="button" 
						class="btn btn-danger btn-sm"
						ng-click="vm.deleteCustomer(customer.id, $index)">delete</button>
			</span>
		</td>
		<td>
			<button type="button"
					class="btn btn-default btn-sm"
					ng-class="{active: customer.editing}"
					ng-click="customer.editing = !customer.editing">
				<span ng-show="!customer.editing">edit</span>
				<span ng-show="customer.editing" 
					  ng-click="vm.editCustomer(customer.id, customer)">save
				</span>
			</button>
		</td>
	</tr>
</table>
